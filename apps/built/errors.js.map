{"version":3,"sources":["errors.js"],"names":[],"mappings":"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","file":"errors.js","sourcesContent":["const browser = window._DT\nconst split = (s, i) => [s.substring(0, i), s.substring(i, i+1), s.substring(i+1)]\n\nconst isLive = () => browser.editor && browser.editor.live\n\n// TODO make beautiful\nlet CUR_ERROR\n\nfunction showFlintErrorDiv() {\n  setTimeout(() => {\n    // avoid showing if error fixed in meantime\n    if (!CUR_ERROR) return\n\n    const errors = document.querySelectorAll('.__flintError')\n    if (!errors.length) return\n    // add active class to show them\n    ;[].forEach.call(errors, error => {\n      if (error.className.indexOf('active') == -1)\n        error.className += ' active'\n    })\n  }, isLive() ? 1000 : 100)\n}\n\nfunction niceRuntimeError(err) {\n  if (err.file)\n    err.file = err.file.replace(new RegExp('.*' + window.location.origin + '(\\/[_]+\\/)?'), '')\n\n  if (err.file && err.file.indexOf('internals.js') >= 0) {\n    if (err.message && err.message.indexOf('Cannot find module') == 0) {\n      const badModule = err.message.match(/(fs|path)/)\n\n      if (badModule && badModule.length) {\n        err.file = 'imported module:'\n        err.message = `Cannot import node-only module: ${badModule[0]}`\n      }\n    }\n    else {\n      err.message = `Error in a locally required file. ${err.message}`\n    }\n  }\n\n  if (err.message)\n    err.niceMessage = err.message.replace(/Uncaught .*Error:\\s*/, '')\n\n  return err\n}\n\nfunction niceNpmError({ msg, name }) {\n  if (msg)\n    msg = msg\n      .replace(/(npm WARN.*\\n|ERR\\!)/g, '')\n      .replace(/npm  argv.*\\n/g, '')\n      .replace(/npm  node v.*\\n/g, '')\n      .replace(/npm  npm.*\\n/g, '')\n      .replace(/npm  code.*\\n/g, '')\n      .replace(/npm  peerinvalid /g, '')\n      .replace(/npm  404 /g, '')\n\n  return { msg, name }\n}\n\nconst niceCompilerError = err =>\n  niceCompilerMessage(fullStack(niceStack(err)))\n\nconst replaceCompilerMsg = (msg) => {\n  if (!msg) return ''\n  return msg\n    .replace(/.*\\.js\\:/, '')\n    .replace(/\\([0-9]+\\:[0-9]+\\)/, '')\n    .replace(/Line [0-9]+\\:\\s*/, '')\n}\n\nconst niceCompilerMessage = err => {\n  err.niceMessage = replaceCompilerMsg(err.message, err.fileName)\n  return err\n}\n\nconst matchErrorLine = /\\>?\\s*([0-9]*)\\s*\\|(.*)/g\nconst indicator = /\\s*\\|\\s*\\^\\s*$/g\n\nconst fullStack = err => {\n  if (!err) return\n  if (err.stack) {\n    err.fullStack = ['', '', '']\n    let index = 0\n    err.stack.split(\"\\n\").forEach(line => {\n      if (indicator.test(line)) return\n      if (!matchErrorLine.test(line)) return\n      let isLine = line[0] === '>'\n      if (isLine) index = 1\n      if (!isLine && index === 1) index = 2\n      let result = line.replace(matchErrorLine, '$1$2').replace(/^(\\s*[0-9]+\\s*)[;]/, '$1 ')\n      err.fullStack[index] += result + \"\\n\"\n    })\n  }\n  return err\n}\n\nconst niceStack = err => {\n  if (!err) return\n  if (err.stack) {\n    err.stack.split(\"\\n\").map(line => {\n      if (line[0] === '>') {\n        let result = line\n        if (!result) return\n        // remove the babel \" > |\" before the line\n        result = result.replace(/\\>\\s*[0-9]+\\s*\\|\\s*/, '')\n        result = replaceCompilerMsg(result)\n        const colIndex = err.loc.column - 4 // 4 because we remove babel prefix\n        err.niceStack = split(result, colIndex)\n      }\n    })\n  }\n  return err\n}\n\nconst log = (...args) => {\n  if (false) console.log(...args)\n}\n\nview Errors {\n  view.pause()\n\n  let error = null\n  let compileError = null\n  let runtimeError = null\n  let npmError = null\n\n  /* only set error if there is an error,\n     giving compile priority */\n  function setError() {\n    if (compileError)\n      error = niceCompilerError(compileError)\n    else if (runtimeError)\n      error = niceRuntimeError(runtimeError)\n    else {\n      error = null\n    }\n\n    CUR_ERROR = error\n\n    log('tools: view.update()')\n    view.update()\n  }\n\n  function close() {\n    error = null\n    compileError = null\n    runtimeError = null\n    npmError = null\n    view.update()\n  }\n\n  browser.on('compile:error', () => {\n    log('compile:error')\n    compileError = browser.data.error\n    setError()\n  })\n\n  browser.on('runtime:error', () => {\n    // if (runtimeError) return // prefer first error\n    runtimeError = browser.data\n    log('runtime:error', runtimeError)\n    setError()\n  })\n\n  browser.on('npm:error', () => {\n    npmError = niceNpmError(browser.data.error)\n    log('npm:error', npmError)\n    view.update()\n  })\n\n  browser.on('runtime:success', () => {\n    log('runtime:success')\n    runtimeError = null\n    npmError = null\n    setError()\n  })\n\n  browser.on('compile:success', () => {\n    log('compile:success')\n    compileError = null\n    npmError = null\n    setError()\n  })\n\n; <ErrorMessage\n    error={error}\n    npmError={npmError}\n    close={close}\n  />\n}\n\nconst flintAddedLines = 0\nconst last = arr => arr[arr.length - 1]\nconst fileName = url => url && url.replace(/[\\?\\)].*/, '')\nconst getLine = err => err && (err.line || err.loc && err.loc.line)\n\nview ErrorMessage {\n  view.pause()\n\n  let hasError = false\n  let error = {}\n  let npmError, fullStack\n  let line = getLine(view.props.error)\n  let clearDelay\n\n  on.props(() => {\n    clearDelay && clearDelay()\n\n    npmError = view.props.npmError\n    hasError = !!(view.props.error || view.props.npmError)\n    error = view.props.error || error // keep old\n    line = getLine(error)\n    fullStack = null\n\n    view.update()\n\n    // show full stack after a delay\n    if (error) {\n      clearDelay = on.delay(2500, () => {\n        if (hasError && error.fullStack) {\n          fullStack = error.fullStack\n          view.update()\n        }\n      })\n    }\n  })\n\n  // update on editor state\n  browser.emitter.on('editor:state', () => setTimeout(view.update))\n\n; <Debounce\n    // delay more during live typing\n    delay={isLive() ? 2000 : 1000}\n    force={hasError === false}\n    showKey={fullStack || error && error.message}\n    onUpdate={showFlintErrorDiv}\n  >\n    <bar>\n      <Close onClick={view.props.close} size={35} />\n\n      <inner if={npmError}>\n        <where><flint>{npmError.name}</flint></where> {npmError.msg}\n      </inner>\n\n      <inner>\n        <top>\n          <where>\n            <span>In <flint>{fileName(error.file)}</flint></span>\n            <line>{line ? ' line' : ''} <flint if={line}>{line - flintAddedLines}</flint></line>\n          </where>\n\n          {' '}\n\n          <shortError>\n            {(error.niceMessage || error.message || '').trim()}\n            <niceStack if={error.niceStack}>\n              {error.niceStack[0]}\n              <errCol>{error.niceStack[1]}</errCol>\n              {error.niceStack[2]}\n            </niceStack>\n          </shortError>\n\n          <help if={error.help}>\n            {error.help}\n          </help>\n        </top>\n\n        <fullStack if={fullStack}>\n          <ln>{'' + fullStack[0]}</ln>\n          <ln class=\"cur\">{'' + fullStack[1]}</ln>\n          <ln>{'' + fullStack[2]}</ln>\n        </fullStack>\n      </inner>\n    </bar>\n  </Debounce>\n\n  const red = '#cd423e'\n\n  $bar = {\n    display: 'block',\n    background: red,\n    position: 'fixed',\n    left: 0,\n    bottom: hasError ? 0 : -100,\n    transition: 'all 200ms ease-in',\n    right: 0,\n    fontFamily: '-apple-system, \"San Francisco\", Roboto, \"Segou UI\", \"Helvetica Neue\", Helvetica, Arial, sans-serif',\n    fontWeight: 300,\n    color: '#fff',\n    fontSize: '14px',\n    padding: 2,\n    pointerEvents: 'all',\n    overflow: 'scroll',\n    zIndex: 2147483647,\n    boxShadow: '0 -6px 12px rgba(0,0,0,0.06)',\n  }\n\n  $inner = {\n    display: 'block',\n    maxHeight: 200,\n    overflowY: 'scroll'\n  }\n\n  $top = {\n    padding: 8,\n    display: 'block'\n  }\n\n  $where = {\n    display: 'inline-block',\n    pointerEvents: 'all',\n    fontWeight: 300,\n    color: 'rgba(255,255,255,0.8)',\n  }\n\n  $line = {\n    display: 'inline-block',\n    whiteSpace: 'pre',\n    pointerEvents: 'all'\n  }\n\n  $flint = {\n    display: 'inline',\n    fontWeight: 700,\n    color: '#fff'\n  }\n\n  $shortError = {\n    display: 'inline',\n    color: 'rgba(255,255,255,0.7)'\n  }\n\n  const stack = {\n    color: 'rgba(255,255,255,0.85)',\n    display: 'inline',\n    fontFamily: 'Meslo, Menlo, Monaco, monospace',\n    padding: [0, 5]\n  }\n\n  $niceStack = stack\n\n  $cur = {\n    background: '#fff'\n  }\n\n  $errCol = {\n    display: 'inline',\n    borderBottom: '2px solid #f5d64c',\n    margin: -3,\n    padding: 3,\n    color: '#fff'\n  }\n\n  $fullStack = [stack, {\n    maxHeight: fullStack ? 600 : 0,\n    padding: fullStack ? [10, 0] : 0,\n    transition: 'maxHeight ease-in 300ms',\n    color: 'rgba(0,0,0,0.85)',\n    background: 'rgba(255,255,255,0.9)',\n    display: 'block',\n    whiteSpace: 'pre',\n    fontSize: 14,\n    borderRadius: 3,\n    margin: 2\n  }]\n\n  $ln = {\n    padding: [0, 20]\n  }\n\n  $flintline = {\n    whiteSpace: 'pre',\n    pointerEvents: 'all',\n    fontWeight: 'flint'\n  }\n}\n\nview ErrorIcon {\n; <svg viewBox=\"0 0 27.963 27.963\">\n    <path d=\"M13.983,0C6.261,0,0.001,6.259,0.001,13.979c0,7.724,6.26,13.984,13.982,13.984s13.98-6.261,13.98-13.984\n      C27.963,6.259,21.705,0,13.983,0z M13.983,26.531c-6.933,0-12.55-5.62-12.55-12.553c0-6.93,5.617-12.548,12.55-12.548\n      c6.931,0,12.549,5.618,12.549,12.548C26.531,20.911,20.913,26.531,13.983,26.531z\" />\n    <polygon points=\"15.579,17.158 16.191,4.579 11.804,4.579 12.414,17.158\" />\n    <path d=\"M13.998,18.546c-1.471,0-2.5,1.029-2.5,2.526c0,1.443,0.999,2.528,2.444,2.528h0.056c1.499,0,2.469-1.085,2.469-2.528\n      C16.441,19.575,15.468,18.546,13.998,18.546z\" />\n  </svg>\n\n  $svg = {\n    width: 19,\n    fill: 'red',\n    margin: -4,\n    marginLeft: 3,\n    marginRight: 6,\n    opacity: 0.9\n  }\n}\n"],"sourceRoot":"/source/"}