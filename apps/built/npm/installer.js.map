{"version":3,"sources":["npm/installer.js"],"names":[],"mappings":"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","file":"npm/installer.js","sourcesContent":["const tools = window._DT\n\nview Installer {\n  let version = ''\n  let versions = []\n  let name = ''\n  let error = ''\n  let state = 0\n\n  tools.on('package:install', () => {\n    state = 1\n    name = tools.data.name\n  })\n\n  tools.on('package:installed', () => {\n    state = 2\n    setTimeout(() => state = 0, 2000)\n  })\n\n  tools.on('package:error', () => {\n    state = 3\n    name = tools.data.name\n    error = tools.data.error\n    setTimeout(() => state = 0, 2000)\n  })\n\n  tools.on('package:select', () => {\n    state = 4\n    versions = tools.data.versions\n  })\n\n  const selectVersion = v => {\n    version = v\n    tools.data.version = v\n    tools.emitter.emit('package:select')\n    state = 1\n  }\n\n  const closeModal = () => state = 0\n\n  const title = state => {\n    switch(state) {\n      case 1: return `Installing ${name}${version ? ' ' + version : ''}...`\n      case 2: return `Installed ${name}!`\n      case 3: return `Error: ${name}`\n      case 4: return `Select version`\n    }\n  }\n\n  const body = state => {\n    switch(state) {\n      case 1: return null\n      case 2: return null\n      case 3: return error\n      case 4: return <Versions versions={versions} onSelect={selectVersion} />\n    }\n  }\n\n  // was <modal but collided with bootstrap\n; <FlintModal\n    open={state > 0}\n    onClose={closeModal}\n    title={title(state)}\n    titleColor={state == 3 ? \"#8c1919\" : \"#0f8c3c\"}>\n    <InstallerLoading if={false && state < 2} />\n    {body(state)}\n  </FlintModal>\n}\n\nview Versions {\n; <version repeat={view.props.versions} onClick={() => view.props.onSelect(_)}>\n    <inner>\n      <v key={'v' + _index}>{_.version}</v>\n      <info>{_.description}</info>\n      <a href={_.homepage} target=\"_blank\">Info</a>\n    </inner>\n  </version>\n\n  $version = {\n    textAlign: 'left',\n    padding: [2, 4],\n    borderRadius: 2\n  }\n\n  $inner = {\n    flexFlow: 'row'\n  }\n\n  $v = {\n    flexGrow: 1,\n    fontWeight: 'bold',\n\n    ':hover': {\n      background: '#fff',\n      cursor: 'pointer'\n    }\n  }\n\n  $info = {\n  }\n}\n"],"sourceRoot":"/source/"}