{"version":3,"sources":["inspector/view.js"],"names":[],"mappings":"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","file":"inspector/view.js","sourcesContent":["import { omit } from 'lodash'\n\nfunction pathToName(path) {\n  let p = path.split(',')\n  return p[p.length - 1].split('-')[0]\n}\n\nfunction filterProps(props) {\n  let leaveOut = ['if', 'repeat', 'style', 'yield', '__flint']\n  return omit.apply(null, [props].concat(leaveOut))\n}\n\nview Inspector.View {\n  prop highlight, closing, path, onClose\n\n  const inspect = window.Flint.inspect\n  let name\n  let active = false\n  let state = {}\n  let props = null\n  let writeBack = null\n\n  function onSet(write) {\n    view.props.writeBack(path, write)\n  }\n\n  on.delay(60, () => {\n    active = true\n  })\n\n  on.unmount(() => {\n    delete window._Flint.inspector[path]\n  })\n\n  on.props(() => {\n    if (closing === true) active = false\n    if (!path) return\n\n    name = pathToName(path)\n\n    // if not inspecting, inspect\n    if (!_Flint.inspector[path]) {\n      inspect(path, (_props, _state, _wb) => {\n        props = filterProps(_props || {})\n        state = _state || {}\n        writeBack = _wb\n        view.update()\n      })\n    }\n  })\n\n  let hasKeys = o => o && Object.keys(o).length > 0\n  let edit = () => _DT.messageEditor({ type: 'focus:element', view: name })\n\n; <view class={{ active, highlight }}>\n    <Close onClick={onClose} fontSize={20} size={35} />\n    <top>\n      <name>{name}</name>\n      <edit if={false} onClick={edit}>edit</edit>\n    </top>\n\n    <Inspector.Section title=\"Props\" if={hasKeys(props)} class=\"props\">\n      <Tree editable={false} data={props} />\n    </Inspector.Section>\n\n    <Inspector.Section title=\"State\" if={hasKeys(state)}>\n      <Tree\n        editable={true}\n        onSet={onSet}\n        data={state}\n      />\n    </Inspector.Section>\n  </view>\n\n  $view = {\n    position: 'relative',\n    pointerEvents: 'auto',\n    margin: 10,\n    marginBottom: 0,\n    padding: [0, 0, 1],\n    minWidth: 220,\n    minHeight: 34,\n    fontSize: 12,\n    userSelect: 'none',\n    cursor: 'default',\n    background: '#fff',\n    boxShadow: '0px 2px 16px rgba(0,0,0,0.2)',\n    border: '1px solid #ccc',\n    borderRadius: 5,\n    color: '#333',\n    transition: 'all ease-in 60ms',\n    opacity: 0,\n    transform: {\n      x: 20\n    }\n  }\n\n  $top = {\n    flexFlow: 'row'\n  }\n\n  $active = {\n    opacity: 1,\n    transform: {\n      x: 0\n    }\n  }\n\n  $highlight = {\n    border: '2px solid #afb4e2'\n  }\n\n  $Close = {\n    top: -5,\n    right: -5,\n    fontSize: 13\n  }\n\n  $name = {\n    fontWeight: 400,\n    color: 'rgba(0,0,0,0.8)',\n    padding: [8, 8, 0],\n    margin: [0, 0, -6],\n    fontSize: 14\n  }\n\n  $edit = {\n    padding: [8, 8, 0],\n    fontSize: 14,\n    margin: [0, 0, -6],\n    marginLeft: 4,\n    fontWeight: 400,\n    color: 'rgba(24, 101, 227, 0.8)',\n  }\n\n  $expanded = {\n    transform: { y: 0 }\n  }\n\n  $input = {\n    borderRadius: 100,\n    border: '1px solid #ccc',\n    width: '100%',\n    padding: [2, 12],\n    color: '#333',\n    fontSize: 14,\n  }\n\n  $title = {\n    display: 'none',\n    color: '#333',\n    fontWeight: 200,\n    fontSize: 12,\n    margin: [3, 0]\n  }\n\n  $section = {\n    background: [0,0,0,0.05]\n  }\n}\n"],"sourceRoot":"/source/"}