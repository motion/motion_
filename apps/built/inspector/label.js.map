{"version":3,"sources":["inspector/label.js"],"names":[],"mappings":";;;;0BAAoC,QAAQ;;;;;;;AAsDxC,gBAAQ,EAAE,UAAU;AACpB,WAAG,EAAE,CAAC;AACN,YAAI,EAAE,CAAC,CAAC;AACR,aAAK,EAAE,CAAC;AACR,aAAK,EAAE,MAAM;AACb,eAAO,EAAE,CAAC;AACV,aAAK,EAAE,GAAG;AACV,eAAO,EAAE,MAAM;AACf,cAAM,EAAE,MAAM;;AAGd,eAAO,EAAE,CAAC;AACV,iBAAS,EAAE,6BAA6B;;;AAIxC,eAAO,EAAE,cAAc;;;+CApEhB;AACT,UAAK,GAAG,8BAAA;UAAE,QAAQ,mCAAA;UAAE,KAAK,gCAAA,CAAA;;;;;;;AAEzB,UAAI,KAAK,GAAG,IAAI,CAAA;AAChB,UAAI,KAAK,YAAA;UAAE,MAAM,YAAA,CAAA;;AAEjB,QAAE,CAAC,KAAK,CAAC,YAAM;AACb,YAAI,CAAC,KAAK,EAAE,mBAAA,MAAM,GAAG,GAAG,EAAA;;OACzB,CAAC,CAAA;;AAEF,UAAM,OAAO,GAAG,SAAV,OAAO,CAAG,CAAC,EAAI;AACnB,YAAI,CAAC,QAAQ,EAAE,OAAM;AACrB,YAAI,uBAAU,GAAG,CAAC,EAAE,OAAO,KAAK,CAAC,CAAC,GAAG,CAAC,CAAA;AACtC,0BAAA,KAAK,GAAG,IAAI,EAAA;AACZ,SAAC,CAAC,eAAe,EAAE,CAAA;;OACpB,CAAA;;AAED,UAAM,MAAM,GAAG,SAAT,MAAM,CAAG,CAAC,EAAI;AAClB,0BAAA,KAAK,GAAG,KAAK,EAAA;;OACd,CAAA;;AAED,UAAM,QAAQ,GAAG,SAAX,QAAQ,CAAG,CAAC,EAAI;AACpB,2BAAA,MAAM,GAAG,CAAC,CAAC,MAAM,CAAC,KAAK,EAAA;AACvB,YAAI,CAAC,MAAM,CAAC,EAAE,SAAS,EAAE,IAAI,EAAE,CAAC,CAAA;;AAEhC,YAAI,sBAAS,GAAG,CAAC,EAAE;;AAEjB,cAAI,MAAM,KAAK,EAAE,IAAI,KAAK,CAAC,MAAM,CAAC,EAAE,OAAM;SAC3C;;;AAGD,YAAI,MAAM,KAAK,OAAO,EAAE,mBAAA,MAAM,GAAG,KAAK,EAAA;AACtC,YAAI,MAAM,KAAK,MAAM,EAAE,mBAAA,MAAM,GAAG,IAAI,EAAA;AACpC,aAAK,CAAC,MAAM,CAAC,CAAA;;OACd,CAAA;;AAED,UAAI,QAAQ,GAAG,SAAX,QAAQ,CAAG,QAAQ;eAAI,QAAQ,GAAG,EAAE,GAAG,EAAC,QAAQ,EAAE,IAAI,EAAE,QAAQ,EAAE,IAAI,EAAC;OAAA,CAE5E,AAAC;eAAA;AACE,sBAAY,EAAE,GAAG,CAAC,QAAQ,EAAE,AAAC;AAC7B,eAAK,EAAE,MAAM,AAAC;AACd,mBAAK,EAAE,EAAE,KAAK,EAAL,KAAK,EAAE,AAAC;AACjB,cAAI,EAAE,IAAI,CAAC,GAAG,CAAC,CAAC,EAAE,GAAG,IAAI,GAAG,CAAC,MAAM,IAAI,CAAC,CAAC,AAAC;AAC1C,oBAAU,EAAE,KAAK,AAAC;AAClB,qBAAW,EAAE,OAAO,AAAC;AACrB,iBAAO,EAAE,OAAO,AAAC;AACjB,iBAAO,EAAE,MAAM,AAAC;WACZ,QAAQ,CAAC,QAAQ,CAAC,EAClB,EAAE,OAAO,EAAP,OAAO,EAAE,MAAM,EAAN,MAAM,EAAE,QAAQ,EAAR,QAAQ,EAAE,EACjC;SAAA;;;;AAaA,gBAAM,EAAE,uBAAU,GAAG,CAAC,GAAG,SAAS,GAAG,MAAM;;KAQ9C","file":"inspector/label.js","sourcesContent":["import { isNumber, isBoolean } from 'lodash'\n\nview Label {\n  prop val, editable, onSet\n\n  let input = null\n  let focus, newVal\n\n  on.props(() => {\n    if (!focus) newVal = val\n  })\n\n  const onFocus = e => {\n    if (!editable) return\n    if (isBoolean(val)) return onSet(!val)\n    focus = true\n    e.stopPropagation()\n  }\n\n  const onBlur = e => {\n    focus = false\n  }\n\n  const onChange = e => {\n    newVal = e.target.value\n    view.update({ immediate: true })\n\n    if (isNumber(val)) {\n      // dont let them change from num to str\n      if (newVal === '' || isNaN(newVal)) return\n    }\n\n    // todo: debate\n    if (newVal === 'false') newVal = false\n    if (newVal === 'true') newVal = true\n    onSet(newVal)\n  }\n\n  let tabIndex = editable => editable ? {} : {tabIndex: 5000, disabled: true}\n\n; <input\n    defaultValue={val.toString()}\n    value={newVal}\n    class={{ focus }}\n    size={Math.max(4, val && val.length || 0)}\n    spellCheck={false}\n    onMouseDown={onFocus}\n    onFocus={onFocus}\n    onEnter={onBlur}\n    {...tabIndex(editable)}\n    {...{ onFocus, onBlur, onChange }}\n  />\n\n  $input = {\n    position: 'absolute',\n    top: 0,\n    left: -1,\n    right: 0,\n    color: '#333',\n    padding: 1,\n    width: 140,\n    outline: 'none',\n    border: 'none',\n    // nice cursor on boolean toggle\n    cursor: isBoolean(val) ? 'pointer' : 'auto',\n    opacity: 0,\n    boxShadow: '1px 1px 2px rgba(0,0,0,0.4)'\n  }\n\n  $focus = {\n    opacity: '1 !important',\n  }\n}\n"],"sourceRoot":"/source/"}